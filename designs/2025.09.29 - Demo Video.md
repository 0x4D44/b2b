# b2b Demo Video — Script and Diagram (2025‑09‑29)

## One‑Line Hook
End‑to‑end SIP audio in 60–90 seconds with b2b + baresip.

## Voiceover Script (approx. 90s)
- 0–3s — Title: “b2b: A SIP/RTP test tool on baresip.”
- 3–13s — Intro: “We wrapped baresip’s C API with a Rust FFI, then built a demo app that runs in four modes.”
- 13–23s — Roles: “Sink plays received audio. Source streams an MP3 to a SIP target. Mixer accepts a source and dials a sink, mixing in DTMF. Orchestrator reads a plan file and launches everything with centralized, color‑coded logs.”
- 23–30s — Topology: “Today’s pipeline is Source → Mixer → Sink. The mixer overlays a DTMF dialing sequence onto the program audio.”
- 30–40s — Dry run: “First, confirm the plan and resolved host IP.”
  - On screen: `b2b --role orchestrator --plan plans/smk.plan.toml --dry-run`
- 40–65s — Live run: “Now run it. Watch the READY lines and the tags [SRC], [MIX], [SINK]. You’ll hear the audio file with DTMF mixed in.”
  - On screen: `b2b --role orchestrator --plan plans/smk.plan.toml`
- 65–75s — CPU: “Here’s htop — four light processes with negligible CPU.”
- 75–85s — Config: “Plans are simple TOML. Swap to Source→Sink only with the sk plan.”
  - On screen: `b2b --role orchestrator --plan plans/sk.plan.toml`
- 85–90s — Close: “Same binary, four roles, configurable buffers, centralized logs — that’s b2b.”

## Commands (copy/paste)
- Dry run (source→mixer→sink):
  - `b2b --role orchestrator --plan plans/smk.plan.toml --dry-run`
- Run (source→mixer→sink):
  - `b2b --role orchestrator --plan plans/smk.plan.toml`
- Alternate (source→sink):
  - `b2b --role orchestrator --plan plans/sk.plan.toml`

## Mermaid Diagram
```mermaid
graph LR
  ORCH[Orchestrator\n(spawns + aggregates logs)]
  SRC[Source\n(SIP client)]
  MIX[Mixer\n(SIP server+client\nmixes DTMF + input)]
  SINK[Sink\n(SIP server\nplays to ALSA)]
  SPK[(Speakers\naplay)]

  ORCH --> SRC
  ORCH --> MIX
  ORCH --> SINK

  SRC -- SIP/RTP --> MIX
  MIX -- SIP/RTP --> SINK
  MIX -. local DTMF .- MIX
  SINK -->|PCM| SPK

  classDef orch fill:#FFD54F,stroke:#444,stroke-width:1px;
  classDef src fill:#A5D6A7,stroke:#444,stroke-width:1px;
  classDef mix fill:#CE93D8,stroke:#444,stroke-width:1px;
  classDef sink fill:#90CAF9,stroke:#444,stroke-width:1px;

  class ORCH orch
  class SRC src
  class MIX mix
  class SINK sink
```

## Recording Tips
- Terminal font large; dark theme. Start audio 1–2s after READY for clean capture.
- If ALSA isn’t available, set `sink.aplay_cmd = "tee /tmp/sink.pcm > /dev/null"` and overlay the audio in post.
- Reduce log noise by filtering to READY/SIP/RTCP lines if needed.

